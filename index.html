<!DOCTYPE html>

<html>
    <head>
        <title>Archon Tetris</title>
        <link rel='shortcut icon' href='img/favicon.png?version=1' type='image/x-icon'>

        <link rel="stylesheet" type="text/css" href="css/style.css?version=22">

        <script src="js/libs/jquery.min.js?version=1"></script>
        <script src="js/libs/seedrandom.min.js?version=1"></script>
        <script src="js/libs/handlebars.js?version=1"></script>
        <script src="js/libs/msg.min.js?version=1"></script>
        <script src="js/libs/separator.js?version=1"></script>
        <script src="js/libs/colorlib.js?version=1"></script>

        <script src="js/main/base.js?version=32"></script>
        <script src="js/main/utils.js?version=4"></script>
        <script src="js/main/pieces.js?version=28"></script>
        <script src="js/main/grid.js?version=1"></script>
        <script src="js/main/keyboard.js?version=11"></script>
        <script src="js/main/local_storage.js?version=1"></script>
        <script src="js/main/options.js?version=20"></script>
        <script src="js/main/controls.js?version=5"></script>
        <script src="js/main/textures.js?version=1"></script>
        <script src="js/main/theme.js?version=7"></script>

        <script>
            $(function()
            {
                Tetris.init()
            })
        </script>
    </head>
    
    <body>
        <div id='background'></div>
        <div id='main'>
            <div id='main_container'>
                <div id="topbar">
                    <div id='score'>
                        <div id='score_text'>0</div>
                    </div>
                    <div id='info'>
                        <div id='level_text'>Level: 0</div>
                        <div id='speed_text'>Speed: 0</div>
                        <div id='pow_text'>POW: 0</div>
                    </div>
                    <div id='info2'>
                        <div id='seed_text'>Seed: None</div>
                        <div id='menu' class='action unselectable'>Menu</div>
                    </div>
                </div>
                <div id='game_container'>
                    <div id='game' width=800 height=600></div>
                    <div id='countdown' class='game_box unselectable'>3</div>
                    <div id='paused' class='game_box unselectable'>Paused</div>
                </div>
                <div id='sidebar'>
                    <div id='active_piece'>
                        <div id='active_piece_element'></div>
                        <div id='queued_left'></div>
                    </div>
                    <div id='previews'></div>
                </div>
                <div id='piece_picker'>
                    <div id='piece_picker_title'>Choose The Next Four</div>
                    <div id='piece_picker_wheel'>
                        <img id='piece_picker_wheel_arrow_left' class='piece_picker_wheel_arrow' src='img/arrow_left.png'>
                        <div id='piece_picker_wheel_content'></div>
                        <img id='piece_picker_wheel_arrow_right' class='piece_picker_wheel_arrow' src='img/arrow_right.png'>
                    </div>
                </div>
            </div>
        </div>
        <div id='intro'>
            <img id='intro_image' src='img/intro.jpg'>
            <div id='intro_credits'>
                Tetris &copy; 1985 Tetris Holding.<br>
                Tetris logos, Tetris theme song and Tetriminos are trademarks of Tetris Holding.<br>
                The Tetris trade dress is owned by Tetris Holding.<br>
                Licensed to The Tetris Company.<br>
                Tetris Game Design by Alexey Pajitnov.<br>
                Tetris Logo Design by Roger Dean.<br>
                All Rights Reserved.
            </div>
        </div>
        <audio preload id='music' src='audio/music.mp3?version=1'></audio>
        <audio preload id='sound_move' src='audio/move.mp3?version=1'></audio>
        <audio preload id='sound_countdown' src='audio/countdown.mp3?version=1'></audio>
        <audio preload id='sound_game_started' src='audio/game_started.mp3?version=1'></audio>
        <audio preload id='sound_placed' src='audio/placed.mp3?version=1'></audio>
        <audio preload id='sound_intro' src='audio/intro.mp3?version=1'></audio>
        <audio preload id='sound_rotate' src='audio/rotate.mp3?version=2'></audio>
        <audio preload id='sound_clear' src='audio/clear.mp3?version=2'></audio>
        <audio preload id='sound_game_over' src='audio/game_over.mp3?version=2'></audio>
        <audio preload id='sound_pow' src='audio/pow.mp3?version=2'></audio>
        <audio preload id='sound_locked' src='audio/locked.mp3?version=2'></audio>
        <audio preload id='sound_woosh' src='audio/woosh.mp3?version=4'></audio>
        <audio preload id='sound_pow_loaded' src='audio/pow_loaded.mp3?version=4'></audio>
    </body>

    <script id='template_menu' type='text/x-handlebars-template' class='template'>
        <div id='menu_container' class='unselectable'>
            <div id='menu_game_over' class='menu_item action'>Game Over</div>
            <div id='menu_restart' class='menu_item action'>Start</div>
            <div id='menu_options' class='menu_item action'>Options</div>
            <div id='menu_controls' class='menu_item action'>Controls</div>
            <div id='menu_theme' class='menu_item action'>Theme</div>
            <div id='menu_help' class='menu_item action'>Help</div>
        </div>
    </script>

    <script id='template_options' type='text/x-handlebars-template' class='template'>
        <div id='options_container'>
            <div id='options_sidebar' class='unselectable'>
                <div class='options_category_item options_category_item_selected' id='options_category_item_visual'>Visual</div>
                <div class='options_category_item' id='options_category_item_audio'>Audio</div>
                <div class='options_category_item' id='options_category_item_tweaks'>Tweaks</div>
                <div class='options_category_item' id='options_category_item_goal'>Goal</div>
                <div class='options_category_item' id='options_category_item_other'>Other</div>
                <div id="options_reset_button" class='action'>Reset</div>
            </div>
            <div id='options_content'>
                <div id='options_category_visual' class='options_category'>
                    <div class='options_item'>
                        <div class='options_label'>Ghost</div>
                        <input type='checkbox' id='option_ghost' class='options_widget options_checkbox' data-options-widget-type='checkbox'>
                    </div>
                    <div class='options_item'>
                        <div class='options_label'>Rows</div>
                        <input type='number' min="10" id='option_number_of_rows' class='options_widget options_number' data-options-widget-type='number'>
                    </div>
                    <div class='options_item'>
                        <div class='options_label'>Columns</div>
                        <input type='number' min="10" id='option_number_of_columns' class='options_widget options_number' data-options-widget-type='number'>
                    </div>
                    <div class='options_item'>
                        <div class='options_label'>Previews</div>
                        <input type='number' min="0" id='option_number_of_previews' class='options_widget options_number' data-options-widget-type='number'>
                    </div>
                    <div class='options_item'>
                        <div class='options_label'>Block Size</div>
                        <input type='number' min="4" id='option_block_size' class='options_widget options_number' data-options-widget-type='number'>
                    </div>
                    <div class='options_item'>
                        <div class='options_label'>Block Shape</div>
                        <select id='option_block_shape' class='options_widget options_select' data-options-widget-type='select'>
                            <option value='square'>Square</option>
                            <option value='rounded'>Rounded</option>
                            <option value='circle'>Circle</option>
                        </select>
                    </div>
                    <div class='options_item'>
                        <div class='options_label'>Block Texture</div>
                        <select id='option_block_texture' class='options_widget options_select' data-options-widget-type='select'></select>
                    </div>
                    <div class='options_item' id='options_item_block_texture_url'>
                        <div class='options_label'>Block Texture URL</div>
                        <input type='text' id='option_block_texture_url' class='options_widget options_text' data-options-widget-type='text'>
                    </div>
                    <div class='options_item'>
                        <div class='options_label'>Background</div>
                        <select id='option_background' class='options_widget options_select' data-options-widget-type='select'>
                            <option value='none'>None</option>
                            <option value='url'>URL</option>
                            <option value='1'>1</option>
                            <option value='2'>2</option>
                            <option value='3'>3</option>
                            <option value='4'>4</option>
                            <option value='5'>5</option>
                            <option value='6'>6</option>
                            <option value='7'>7</option>
                        </select>
                    </div>
                    <div class='options_item' id='options_item_background_url'>
                        <div class='options_label'>Background URL</div>
                        <input type='text' id='option_background_url' class='options_widget options_text' data-options-widget-type='text'>
                    </div>
                </div>
                <div id='options_category_audio' class='options_category'>
                    <div class='options_item'>
                        <div class='options_label'>Music</div>
                        <input type='checkbox' id='option_music' class='options_widget options_checkbox' data-options-widget-type='checkbox'>
                    </div>
                    <div class='options_item'>
                        <div class='options_label'>Sound Effects</div>
                        <input type='checkbox' id='option_sound_effects' class='options_widget options_checkbox' data-options-widget-type='checkbox'>
                    </div>
                </div>
                <div id='options_category_tweaks' class='options_category'>
                    <div class='options_item'>
                        <div class='options_label'>Seed</div>
                        <input type='text' id='option_seed' class='options_widget options_text' data-options-widget-type='text' placeholder="Empty == Random">
                    </div>
                    <div class='options_item'>
                        <div class='options_label' title='This is in milliseconds. Higher == Speed increases faster as levels increase'>Descent Multiplier</div>
                        <input type='number' min="1" id='option_descent_multiplier' class='options_widget options_number' data-options-widget-type='number'>
                    </div>
                    <div class='options_item'>
                        <div class='options_label' title='This is in milliseconds. Lower == Faster'>Minimum Descent Delay</div>
                        <input type='number' min="10" id='option_min_descent_delay' class='options_widget options_number' data-options-widget-type='number'>
                    </div>
                    <div class='options_item'>
                        <div class='options_label' title='This is in milliseconds. Lower == Faster'>Soft Drop Delay</div>
                        <input type='number' min="0" id='option_soft_drop_delay' class='options_widget options_number' data-options-widget-type='number'>
                    </div>
                    <div class='options_item'>
                        <div class='options_label' title='This makes all pieces touching a cleared line to separate into independent blocks'>Independence</div>
                        <input type='checkbox' id='option_independence' class='options_widget options_checkbox' data-options-widget-type='checkbox'>
                    </div>
                    <div class='options_item'>
                        <div class='options_label'>Piece Picker</div>
                        <input type='checkbox' id='option_piece_picker' class='options_widget options_checkbox' data-options-widget-type='checkbox'>
                    </div>
                    <div class='options_item' id='options_item_piece_picker_list'>
                        <div class='options_label'>Piece Picker List</div>
                        <select id='option_piece_picker_list' class='options_widget options_select' data-options-widget-type='select'>
                            <option value='normal_and_big'>Normal And Big Pieces</option>
                            <option value='only_normal'>Only Normal Pieces</option>
                            <option value='only_big'>Only Big Pieces</option>
                        </select>
                    </div>
                    <div class='options_item'>
                        <div class='options_label'>Big Pieces</div>
                        <input type='checkbox' id='option_big_pieces' class='options_widget options_checkbox' data-options-widget-type='checkbox'>
                    </div>
                    <div class='options_item' id='options_item_big_piece_goal'>
                        <div class='options_label'>Pieces Before Big Piece</div>
                        <input type='number' min="1" id='option_big_piece_goal' class='options_widget options_number' data-options-widget-type='number'>
                    </div>
                    <div class='options_item'>
                        <div class='options_label'>POW</div>
                        <input type='checkbox' id='option_pow' class='options_widget options_checkbox' data-options-widget-type='checkbox'>
                    </div>
                    <div class='options_item' id='options_item_pow_goal'>
                        <div class='options_label'>Line Clears To Earn POW</div>
                        <input type='number' min="1" id='option_pow_goal' class='options_widget options_number' data-options-widget-type='number'>
                    </div>
                    <div class='options_item'>
                        <div class='options_label'>Line Clears To Level Up</div>
                        <input type='number' min="1" id='option_level_goal' class='options_widget options_number' data-options-widget-type='number'>
                    </div>
                </div>
                <div id='options_category_goal' class='options_category'>
                    <div class='options_item'>
                        <div class='options_label'>Goal Type</div>
                        <select id='option_goal_type' class='options_widget options_select' data-options-widget-type='select'>
                            <option value="none" selected>None</option>
                            <option value="score">Score</option>
                            <option value="level">Level</option>
                            <option value="minutes">Minutes</option>
                        </select>
                    </div>
                    <div class='options_item' id='options_item_goal'>
                        <div class='options_label'>Goal</div>
                        <input type='number' min="1" id='option_goal' class='options_widget options_number_big' data-options-widget-type='text'>
                    </div>
                </div>
                <div id='options_category_other' class='options_category'>
                    <div class='options_item'>
                        <div class='options_label'>Warn Before Closing</div>
                        <input type='checkbox' id='option_warn_before_closing' class='options_widget options_checkbox' data-options-widget-type='checkbox'>
                    </div>
                </div>
            </div>
        </div>
    </script>

    <script id='template_controls' type='text/x-handlebars-template' class='template'>
        <div id='controls_container'>
            <div class='controls_item'>
                <div class='controls_label'>Rotate Right</div>
                <input type='text' id='control_rotate_right' data-category='game' class='controls_input'>
            </div>
            <div class='controls_item'>
                <div class='controls_label'>Rotate Left</div>
                <input type='text' id='control_rotate_left' data-category='game' class='controls_input'>
            </div>
            <div class='controls_item'>
                <div class='controls_label'>Move Right</div>
                <input type='text' id='control_move_right' data-category='game' class='controls_input'>
            </div>
            <div class='controls_item'>
                <div class='controls_label'>Move Left</div>
                <input type='text' id='control_move_left' data-category='game' class='controls_input'>
            </div>
            <div class='controls_item'>
                <div class='controls_label'>Move Down</div>
                <input type='text' id='control_move_down' data-category='game' class='controls_input'>
            </div>
            <div class='controls_item'>
                <div class='controls_label'>Soft Drop</div>
                <input type='text' id='control_soft_drop' data-category='game' class='controls_input'>
            </div>
            <div class='controls_item'>
                <div class='controls_label'>Hard Drop</div>
                <input type='text' id='control_hard_drop' data-category='game' class='controls_input'>
            </div>
            <div class='controls_item'>
                <div class='controls_label'>Activate POW</div>
                <input type='text' id='control_activate_pow' data-category='game' class='controls_input'>
            </div>
            <div class='controls_item'>
                <div class='controls_label'>Restart Game</div>
                <input type='text' id='control_restart_game' data-category='game' class='controls_input'>
            </div>
            <div class='controls_item'>
                <div class='controls_label'>Piece Picker: Next</div>
                <input type='text' id='control_piece_picker_next' data-category='piece_picker' class='controls_input'>
            </div>
            <div class='controls_item'>
                <div class='controls_label'>Piece Picker: Previous</div>
                <input type='text' id='control_piece_picker_previous' data-category='piece_picker' class='controls_input'>
            </div>
            <div class='controls_item'>
                <div class='controls_label'>Piece Picker: Select</div>
                <input type='text' id='control_piece_picker_select' data-category='piece_picker' class='controls_input'>
            </div>
            <div class='controls_item'>
                <div class='controls_label' id='controls_reset'>Reset</div>
            </div>
        </div>
    </script>

    <script id='template_help' type='text/x-handlebars-template' class='template'>
        <div id='help_container'>
            <div class='help_item'>
                Levels increase every 5 lines cleared. As levels increase, pieces fall faster, but scoring increases.
            </div>
            <div class='help_item'>
                Clearing a line separates all pieces touching the line into their own block.
            </div>
            <div class='help_item'>
                Activating a POW on the current piece separates all placed pices into blocks that are independent and loose when the piece is placed. This causes them to fall.
            </div>
            <div class='help_item'>
                POWs increase every 50 lines cleared.
            </div>
            <div class='help_item'>
                Clearing more than 4 lines activates a piece picker to choose the next 4 pieces. This gets triggered on the next piece.
            </div>
            <div class='help_item'>
                Every 50 pieces placed a big piece appears.
            </div>
            <div class='help_item'>
                <div id='help_controls'>Controls</div>
            </div>
        </div>
    </script>

    <script id='template_game_over' type='text/x-handlebars-template' class='template'>
        <div id='game_over_container'>
            <div id='game_over_level' class='game_over_big'></div>
            <div id='game_over_score' class='game_over_big'></div>
            <div id='game_over_time' class='game_over_big'></div>
            <div id='game_over_pieces_placed' class='game_over_big'></div>
            <div id='game_over_lines_cleared' class='game_over_big'></div>
            <div id='game_over_max_combo' class='game_over_big'></div>
            <div id='game_over_pows_earned' class='game_over_big'></div>
            <div id='game_over_pows_used' class='game_over_big'></div>
            <div id='game_over_buttons'>
                <div id='game_over_play_again' class='game_over_button action'>Play Again</div>
            </div>
        </div>
    </script>

    <script id='template_texture_preview' type='text/x-handlebars-template' class='template'>
        <div id='texture_preview_container'>
            <div id='texture_preview_name'></div>
            <div id='texture_preview_element'></div>
            <div id='texture_preview_buttons' class='unselectable'>
                <div id='texture_preview_random'>Random</div>
                <div id='texture_preview_previous'>Previous</div>
            </div>
        </div>
    </script>

    <script id='template_theme' type='text/x-handlebars-template' class='template'>
        <div id='theme_container'>
            <div class='theme_item'>
                <div class='theme_label'>Stick</div>
                <input type='color' class='theme_color' id='theme_color_stick'>
                <div class='theme_element' id='theme_element_stick'></div>
            </div>
            <div class='theme_item'>
                <div class='theme_label'>Periscope Right</div>
                <input type='color' class='theme_color' id='theme_color_periscope_right'>
                <div class='theme_element' id='theme_element_periscope_right'></div>
            </div>
            <div class='theme_item'>
                <div class='theme_label'>Periscope Left</div>
                <input type='color' class='theme_color' id='theme_color_periscope_left'>
                <div class='theme_element' id='theme_element_periscope_left'></div>
            </div>
            <div class='theme_item'>
                <div class='theme_label'>Dog Right</div>
                <input type='color' class='theme_color' id='theme_color_dog_right'>
                <div class='theme_element' id='theme_element_dog_right'></div>
            </div>
            <div class='theme_item'>
                <div class='theme_label'>Dog Left</div>
                <input type='color' class='theme_color' id='theme_color_dog_left'>
                <div class='theme_element' id='theme_element_dog_left'></div>
            </div>
            <div class='theme_item'>
                <div class='theme_label'>Square</div>
                <input type='color' class='theme_color' id='theme_color_square'>
                <div class='theme_element' id='theme_element_square'></div>
            </div>
            <div class='theme_item'>
                <div class='theme_label'>Tee</div>
                <input type='color' class='theme_color' id='theme_color_tee'>
                <div class='theme_element' id='theme_element_tee'></div>
            </div>
            <div class='theme_item'>
                <div class='theme_label'>Independent</div>
                <input type='color' class='theme_color' id='theme_color_independent'>
                <div class='theme_element' id='theme_element_independent'></div>
            </div>
            <div class='theme_item'>
                <div id='theme_reset'>Reset</div>
            </div>
        </div>
    </script>
</html>